$(document).on("click","#setup_my .pinset",function(){function a(){var a={op:"setup_my_pinset",pin:$.trim($("#pin").val())};a.pin?3>a.pin.length?(b("Длина пин-кода от 3 до 10 символов"),$("#pin").focus()):(c.process(),$.post(AJAX_MAIN,a,function(b){b.success?(c.close(),_msg("Пин-код установлен."),document.location.reload()):c.abort()},"json")):(b("Введите пин-код"),$("#pin").focus())}function b(b){c.bottom.vkHint({msg:'<span class="red">'+b+"</span>",top:-47,left:52,indent:50,show:1,remove:1})}$(this);
var c=_dialog({width:300,head:"Установка нового пин-кода",content:'<table class="setup-tab"><tr><td class="label">Новый пин-код:<td><input id="pin" type="password" maxlength="10" /></table>',butSubmit:"Установить",submit:a});$("#pin").focus().keyEnter(a)}).on("click","#setup_my .pinchange",function(){function a(){var a={op:"setup_my_pinchange",oldpin:$.trim($("#oldpin").val()),pin:$.trim($("#pin").val())};a.oldpin&&a.pin?3>a.oldpin.length||3>a.pin.length?b("Длина пин-кода от 3 до 10 символов"):(c.process(),
$.post(AJAX_MAIN,a,function(a){a.success?(c.close(),_msg("Пин-код изменён."),document.location.reload()):(c.abort(),b(a.text))},"json")):b("Заполните оба поля")}function b(b){c.bottom.vkHint({msg:'<span class="red">'+b+"</span>",top:-47,left:52,indent:50,show:1,remove:1})}$(this);var c=_dialog({width:300,head:"Изменение пин-кода",content:'<table class="setup-tab"><tr><td class="label">Текущий пин-код:<td><input id="oldpin" type="password" maxlength="10" /><tr><td class="label">Новый пин-код:<td><input id="pin" type="password" maxlength="10" /></table>',
butSubmit:"Изменить",submit:a});$("#oldpin").focus().keyEnter(a);$("#pin").keyEnter(a)}).on("click","#setup_my .pindel",function(){function a(){var a={op:"setup_my_pindel",oldpin:$.trim($("#oldpin").val())};a.oldpin?3>a.oldpin.length?(b("Длина пин-кода от 3 до 10 символов"),$("#oldpin").focus()):(c.process(),$.post(AJAX_MAIN,a,function(a){a.success?(c.close(),_msg("Пин-код удалён."),document.location.reload()):(c.abort(),b(a.text))},"json")):(b("Заполните оба поля"),$("#oldpin").focus())}function b(b){c.bottom.vkHint({msg:'<span class="red">'+
b+"</span>",top:-47,left:52,indent:50,show:1,remove:1})}$(this);var c=_dialog({width:300,head:"Удаление пин-кода",content:'<table class="setup-tab"><tr><td class="label">Текущий пин-код:<td><input id="oldpin" type="password" maxlength="10" /></table>',butSubmit:"Применить",submit:a});$("#oldpin").focus().keyEnter(a)}).on("click","#setup_worker .add",function(){function a(){if(!d.hasClass("busy")){e=0;$(".res").remove();var b={user_ids:$.trim($("#viewer_id").val()),fields:"photo_50",v:5.2};b.user_ids&&
(/vk.com/.test(b.user_ids)&&(b.user_ids=b.user_ids.split("vk.com/")[1]),/\?/.test(b.user_ids)&&(b.user_ids=b.user_ids.split("?")[0]),/#/.test(b.user_ids)&&(b.user_ids=b.user_ids.split("#")[0]),d.addClass("busy"),VK.api("users.get",b,function(b){d.removeClass("busy");b.response&&(b=b.response[0],d.after('<table class="res"><tr><td class="photo"><img src='+b.photo_50+'><td class="name">'+b.first_name+" "+b.last_name+"</table>"),e=b.id)}))}}function b(b,a){c.bottom.vkHint({msg:'<SPAN class="red">'+b+
"</SPAN>",remove:1,indent:40,show:1,top:a,left:90})}var c=_dialog({top:50,width:350,head:"Добавление нового сотрудника",content:'<div id="setup_worker_add"><h1>Укажите адрес страницы пользователя или его<br />ID ВКонтакте:</h1><h2>Формат адреса может быть следующих видов:<br /><u>http://vk.com/id12345</u>, <u>http://vk.com/durov</u>.<br />Либо используйте ID пользователя: <u>id12345</u>, <u>durov</u>, <u>12345</u>.</h2><input type="text" id="viewer_id" /><div class="vkButton"><button>Найти</button></div><a class="manual">Или заполните данные вручную..</a><table class="manual_tab"><tr><td class="label">Имя:<td><input type="text" id="first_name" /><tr><td class="label">Фамилия:<td><input type="text" id="last_name" /><tr><td class="label">Пол:<td><input type="hidden" id="sex" value="0" /><tr><td class="label">Должность:<td><input type="text" id="post" /></table></div>',
butSubmit:"Добавить",submit:function(){var a={op:"setup_worker_add",viewer_id:e,first_name:$("#first_name").val(),last_name:$("#last_name").val(),sex:$("#sex").val(),post:$("#post").val()};a.viewer_id||a.first_name||a.last_name?a.first_name&&a.last_name&&0==a.sex?b("Не указан пол",-47):(c.process(),$.post(AJAX_MAIN,a,function(a){a.success?(c.close(),_msg("Новый сотрудник успешно добавлен."),$("#spisok").html(a.html)):(c.abort(),b(a.text,-60))},"json")):b("Произведите поиск пользователя<br>или укажите вручную имя и фамилию",
-60)}}),e=0,d=$("#viewer_id").focus().keyEnter(a).next();d.click(a);$(".manual").click(function(){$(this).hide().next().show();$(".res").remove();e=0;$("#viewer_id").val("");$("#first_name").focus()});$("#sex")._radio({spisok:[{uid:2,title:"М"},{uid:1,title:"Ж"}]})}).on("click","#setup_worker .img_del",function(){for(var a=$(this);!a.hasClass("unit");)a=a.parent();var b=_dialog({top:110,width:250,head:"Удаление сотрудника",content:"<center>Подтвердите удаление сотрудника.</center>",butSubmit:"Удалить",
submit:function(){var c={op:"setup_worker_del",viewer_id:a.attr("val")};b.process();$.post(AJAX_MAIN,c,function(a){a.success?(b.close(),_msg("Сотрудник удален."),$("#spisok").html(a.html)):b.abort()},"json")}})}).on("click","#setup_product .add",function(){function a(){var a={op:"setup_product_add",name:$("#name").val()};a.name?(b.process(),$.post(AJAX_MAIN,a,function(a){a.success?($(".spisok").html(a.html),b.close(),_msg("Внесено!")):b.abort()},"json")):(b.bottom.vkHint({msg:"<SPAN class=red>Не указано наименование</SPAN>",
top:-47,left:99,indent:50,show:1,remove:1}),$("#name").focus())}$(this);var b=_dialog({top:60,width:390,head:"Добавление нового наименования изделия",content:'<table style="border-spacing:10px"><tr><td class="label r">Наименование:<td><input id="name" type="text" maxlength="100" style="width:250px" /></table>',submit:a});$("#name").focus().keyEnter(a)}).on("click","#setup_product .img_edit",function(){function a(){var b={op:"setup_product_edit",id:c,name:$("#name").val()};b.name?(d.process(),$.post(AJAX_MAIN,
b,function(b){b.success?($(".spisok").html(b.html),d.close(),_msg("Сохранено!")):d.abort()},"json")):(d.bottom.vkHint({msg:"<SPAN class=red>Не указано наименование</SPAN>",top:-47,left:99,indent:50,show:1,remove:1}),$("#name").focus())}for(var b=$(this);"TR"!=b[0].tagName;)b=b.parent();var c=b.attr("val"),e=b.find(".name a");b.find(".dog").html();var b='<table style="border-spacing:10px"><tr><td class="label">Наименование:<td><input id="name" type="text" maxlength="100" style="width:250px" value="'+
e.html()+'" /></table>',d=_dialog({top:60,width:390,head:"Редактирование наименования изделия",content:b,butSubmit:"Сохранить",submit:a});$("#name").focus().keyEnter(a)}).on("click","#setup_product .img_del",function(){var a=$(this),b=_dialog({top:90,width:300,head:"Удаление изделия",content:"<center><b>Подтвердите удаление изделия.</b></center>",butSubmit:"Удалить",submit:function(){for(;"TR"!=a[0].tagName;)a=a.parent();var c={op:"setup_product_del",id:a.attr("val")};b.process();$.post(AJAX_MAIN,
c,function(c){c.success?(a.remove(),b.close(),_msg("Удалено!")):b.abort()},"json")}})}).on("click","#setup_product_sub .add",function(){function a(){var a={op:"setup_product_sub_add",product_id:PRODUCT_ID,name:$("#name").val()};a.name?(b.process(),$.post(AJAX_MAIN,a,function(a){a.success?($(".spisok").html(a.html),b.close(),_msg("Внесено!")):b.abort()},"json")):(b.bottom.vkHint({msg:"<SPAN class=red>Не указано наименование</SPAN>",top:-47,left:99,indent:50,show:1,remove:1}),$("#name").focus())}$(this);
var b=_dialog({top:60,width:390,head:"Добавление нового подвида изделия",content:'<table style="border-spacing:10px"><tr><td class="label">Наименование:<td><input id="name" type="text" maxlength="100" style="width:250px" /></table>',submit:a});$("#name").focus().keyEnter(a)}).on("click","#setup_product_sub .img_edit",function(){function a(){var a={op:"setup_product_sub_edit",id:b.attr("val"),name:$("#name").val()};a.name?(d.process(),$.post(AJAX_MAIN,a,function(b){b.success?(c.html(a.name),d.close(),
_msg("Сохранено!")):d.abort()},"json")):(d.bottom.vkHint({msg:"<SPAN class=red>Не указано наименование</SPAN>",top:-47,left:99,indent:50,show:1,remove:1}),$("#name").focus())}for(var b=$(this);"TR"!=b[0].tagName;)b=b.parent();var c=b.find(".name"),e='<table style="border-spacing:10px"><tr><td class="label">Наименование:<td><input id="name" type="text" maxlength="100" style="width:250px" value="'+c.html()+'" /></table>',d=_dialog({top:60,width:390,head:"Редактирование подвида изделия",content:e,butSubmit:"Сохранить",
submit:a});$("#name").focus().keyEnter(a)}).on("click","#setup_product_sub .img_del",function(){var a=$(this),b=_dialog({top:90,width:300,head:"Удаление подвида",content:"<center><b>Подтвердите удаление подвида изделия.</b></center>",butSubmit:"Удалить",submit:function(){for(;"TR"!=a[0].tagName;)a=a.parent();var c={op:"setup_product_sub_del",id:a.attr("val")};b.process();$.post(AJAX_MAIN,c,function(c){c.success?(a.remove(),b.close(),_msg("Удалено!")):b.abort()},"json")}})}).on("click","#setup_invoice .add",
function(){function a(){var a={op:"setup_invoice_add",name:$("#name").val(),about:$("#about").val(),types:$("#types").val(),visible:$("#visible").val()};a.name?(c.process(),$.post(AJAX_MAIN,a,function(a){a.success?($(".spisok").html(a.html),c.close(),_msg("Внесено!")):(c.abort(),b(a.text))},"json")):(b("Не указано наименование"),$("#name").focus())}function b(b){c.bottom.vkHint({msg:"<SPAN class=red>"+b+"</SPAN>",top:-47,left:100,indent:50,show:1,remove:1})}$(this);var c=_dialog({top:60,width:400,
head:"Добавление нового счёта",content:'<table class="setup-tab"><tr><td class="label">Наименование:<td><input id="name" type="text" maxlength="50" /><tr><td class="label topi">Описание:<td><textarea id="about"></textarea><tr><td class="label topi">Виды платежей:<td><input type="hidden" id="types" /><tr><td class="label topi">Видимость<br />для сотрудников:<td><input type="hidden" id="visible" /></table>',submit:a});$("#name").focus().keyEnter(a);$("#types")._select({width:218,multiselect:1,spisok:INCOME_SPISOK});
$("#visible")._select({width:218,multiselect:1,spisok:WORKER_SPISOK})}).on("click","#setup_invoice .img_edit",function(){function a(){var a={op:"setup_invoice_edit",id:e,name:$("#name").val(),about:$("#about").val(),types:$("#types").val(),visible:$("#visible").val()};a.name?(g.process(),$.post(AJAX_MAIN,a,function(a){a.success?($(".spisok").html(a.html),g.close(),_msg("Сохранено!")):(g.abort(),b(a.text))},"json")):(b("Не указано наименование"),$("#name").focus())}function b(a){g.bottom.vkHint({msg:"<SPAN class=red>"+
a+"</SPAN>",top:-47,left:100,indent:50,show:1,remove:1})}for(var c=$(this);"TR"!=c[0].tagName;)c=c.parent();var e=c.attr("val"),d=c.find(".name div").html(),h=c.find(".name pre").html(),f=c.find(".type_id").val(),c=c.find(".visible_id").val(),g=_dialog({top:60,width:400,head:"Редактирование данных счёта",content:'<table class="setup-tab"><tr><td class="label r">Наименование:<td><input id="name" type="text" maxlength="100" value="'+d+'" /><tr><td class="label r top">Описание:<td><textarea id="about">'+
h+'</textarea><tr><td class="label topi">Виды платежей:<td><input type="hidden" id="types" value="'+f+'" /><tr><td class="label topi">Видимость<br />для сотрудников:<td><input type="hidden" id="visible" value="'+c+'" /></table>',butSubmit:"Сохранить",submit:a});$("#name").focus().keyEnter(a);$("#types")._select({width:218,multiselect:1,spisok:INCOME_SPISOK});$("#visible")._select({width:218,multiselect:1,spisok:WORKER_SPISOK})}).on("click","#setup_invoice .img_del",function(){var a=$(this),b=_dialog({top:90,
width:300,head:"Удаление счёта",content:"<center><b>Подтвердите удаление счёта.</b></center>",butSubmit:"Удалить",submit:function(){for(;"TR"!=a[0].tagName;)a=a.parent();var c={op:"setup_invoice_del",id:a.attr("val")};b.process();$.post(AJAX_MAIN,c,function(a){a.success?($(".spisok").html(a.html),b.close(),_msg("Удалено!")):b.abort()},"json")}})}).on("click","#setup_income .add",function(){function a(){var a={op:"setup_income_add",name:$("#name").val(),confirm:$("#confirm").val()};a.name?(b.process(),
$.post(AJAX_MAIN,a,function(a){a.success?($(".spisok").html(a.html),b.close(),_msg("Внесено!"),sortable()):b.abort()},"json")):(b.bottom.vkHint({msg:"<SPAN class=red>Не указано наименование</SPAN>",top:-47,left:131,indent:50,show:1,remove:1}),$("#name").focus())}$(this);var b=_dialog({head:"Добавление нового вида платежа",content:'<table class="setup-tab"><tr><td class="label r">Наименование:<td><input id="name" type="text" maxlength="100" /><tr><td class="label r">Подтверждение<br />поступления<br />на счёт:<td><input id="confirm" type="hidden" /></table>',
submit:a});$("#name").focus().keyEnter(a);$("#confirm")._check()}).on("click","#setup_income .img_edit",function(){function a(){var a={op:"setup_income_edit",id:c,name:$("#name").val(),confirm:$("#confirm").val()};a.name?(d.process(),$.post(AJAX_MAIN,a,function(a){a.success?($(".spisok").html(a.html),d.close(),_msg("Сохранено!"),sortable()):d.abort()},"json")):(d.bottom.vkHint({msg:"<SPAN class=red>Не указано наименование</SPAN>",top:-47,left:131,indent:50,show:1,remove:1}),$("#name").focus())}for(var b=
$(this);"DD"!=b[0].tagName;)b=b.parent();var c=b.attr("val"),e=b.find(".name").html(),b=b.find(".confirm").html()?1:0,d=_dialog({top:60,width:440,head:"Редактирование вида платежа",content:'<table class="setup-tab"><tr><td class="label r">Наименование:<td><input id="name" type="text" maxlength="100" value="'+e+'" /><tr><td class="label r">Подтверждение<br />поступления<br />на счёт:<td><input id="confirm" type="hidden" value="'+b+'" /></table>',butSubmit:"Сохранить",submit:a});$("#name").focus().keyEnter(a);
$("#confirm")._check()}).on("click","#setup_income .img_del",function(){var a=$(this),b=_dialog({top:90,width:300,head:"Удаление вида платежа",content:"<center><b>Подтвердите удаление вида платежа.</b></center>",butSubmit:"Удалить",submit:function(){for(;"DD"!=a[0].tagName;)a=a.parent();var c={op:"setup_income_del",id:a.attr("val")};b.process();$.post(AJAX_MAIN,c,function(a){a.success?($(".spisok").html(a.html),b.close(),_msg("Удалено!"),sortable()):b.abort()},"json")}})}).on("click","#setup_expense .add",
function(){function a(){var a={op:"setup_expense_add",name:$("#name").val(),show_worker:$("#show_worker").val()};a.name?(b.process(),$.post(AJAX_MAIN,a,function(a){a.success?($(".spisok").html(a.html),b.close(),_msg("Внесено!"),sortable()):b.abort()},"json")):(b.bottom.vkHint({msg:"<SPAN class=red>Не указано наименование</SPAN>",top:-47,left:131,indent:50,show:1,remove:1}),$("#name").focus())}$(this);var b=_dialog({width:400,head:"Добавление новой категории расхода организации",content:'<table class="setup-tab"><tr><td class="label r">Наименование:<td><input id="name" type="text" maxlength="50" /><tr><td class="label r">Список сотрудников:<td><input id="show_worker" type="hidden" /></table>',
submit:a});$("#name").focus().keyEnter(a);$("#show_worker")._check()}).on("click","#setup_expense .img_edit",function(){function a(){var a={op:"setup_expense_edit",id:c,name:$("#name").val(),show_worker:$("#show_worker").val()};a.name?(d.process(),$.post(AJAX_MAIN,a,function(a){a.success?($(".spisok").html(a.html),d.close(),_msg("Сохранено!"),sortable()):d.abort()},"json")):(d.bottom.vkHint({msg:'<span class="red">Не указано наименование</span>',top:-47,left:131,indent:50,show:1,remove:1}),$("#name").focus())}
for(var b=$(this);"DD"!=b[0].tagName;)b=b.parent();var c=b.attr("val"),e=b.find(".name").html(),b=b.find(".worker").html()?1:0,d=_dialog({width:400,head:"Редактирование категории расхода организации",content:'<table class="setup-tab"><tr><td class="label r">Наименование:<td><input id="name" type="text" maxlength="50" value="'+e+'" /><tr><td class="label r">Список сотрудников:<td><input id="show_worker" type="hidden" value="'+b+'" /></table>',butSubmit:"Сохранить",submit:a});$("#name").focus().keyEnter(a);
$("#show_worker")._check()}).on("click","#setup_expense .img_del",function(){var a=$(this),b=_dialog({top:90,head:"Удаление категории расхода организации",content:"<center><b>Подтвердите удаление.</b></center>",butSubmit:"Удалить",submit:function(){for(;"DD"!=a[0].tagName;)a=a.parent();var c={op:"setup_expense_del",id:a.attr("val")};b.process();$.post(AJAX_MAIN,c,function(a){a.success?($(".spisok").html(a.html),b.close(),_msg("Удалено!"),sortable()):b.abort()},"json")}})}).on("click","#setup_zayavexpense .add",
function(){function a(){var a={op:"setup_zayavrashod_add",name:$("#name").val(),show_txt:$("#show_txt").val(),show_worker:$("#show_worker").val()};a.name?(c.process(),$.post(AJAX_MAIN,a,function(a){a.success?($(".spisok").html(a.html),c.close(),_msg("Внесено!"),sortable()):c.abort()},"json")):(c.bottom.vkHint({msg:"<SPAN class=red>Не указано наименование</SPAN>",top:-47,left:131,indent:50,show:1,remove:1}),$("#name").focus())}function b(a,b){1==a&&("show_txt"==b?$("#show_worker")._check(0):$("#show_txt")._check(0))}
$(this);var c=_dialog({top:60,width:440,head:"Добавление новой категории расхода заявки",content:'<table style="border-spacing:10px"><tr><td class="label r">Наименование:<td><input id="name" type="text" maxlength="50" style="width:210px" /><tr><td class="label r">Текстовое поле:<td><input id="show_txt" type="hidden" /><tr><td class="label r">Список сотрудников:<td><input id="show_worker" type="hidden" /></table>',submit:a});$("#name").focus().keyEnter(a);$("#show_txt")._check({func:b});$("#show_worker")._check({func:b})}).on("click",
"#setup_zayavexpense .img_edit",function(){function a(){var a={op:"setup_zayavrashod_edit",id:e,name:$("#name").val(),show_txt:$("#show_txt").val(),show_worker:$("#show_worker").val()};a.name?(f.process(),$.post(AJAX_MAIN,a,function(a){a.success?($(".spisok").html(a.html),f.close(),_msg("Сохранено!"),sortable()):f.abort()},"json")):(f.bottom.vkHint({msg:"<SPAN class=red>Не указано наименование</SPAN>",top:-47,left:131,indent:50,show:1,remove:1}),$("#name").focus())}function b(a,b){1==a&&("show_txt"==
b?$("#show_worker")._check(0):$("#show_txt")._check(0))}for(var c=$(this);"DD"!=c[0].tagName;)c=c.parent();var e=c.attr("val"),d=c.find(".name").html(),h=c.find(".txt").html()?1:0,c=c.find(".worker").html()?1:0,f=_dialog({top:60,width:440,head:"Редактирование категории расхода заявки",content:'<table style="border-spacing:10px"><tr><td class="label r">Наименование:<td><input id="name" type="text" maxlength="50" style="width:210px" value="'+d+'" /><tr><td class="label r">Текстовое поле:<td><input id="show_txt" type="hidden" value="'+
h+'" /><tr><td class="label r">Список сотрудников:<td><input id="show_worker" type="hidden" value="'+c+'" /></table>',butSubmit:"Сохранить",submit:a});$("#name").focus().keyEnter(a);$("#show_txt")._check({func:b});$("#show_worker")._check({func:b})}).on("click","#setup_zayavexpense .img_del",function(){var a=$(this),b=_dialog({top:90,width:300,head:"Удаление категории расхода заявки",content:"<center><b>Подтвердите удаление<br />категории расхода заявки.</b></center>",butSubmit:"Удалить",submit:function(){for(;"DD"!=
a[0].tagName;)a=a.parent();var c={op:"setup_zayavrashod_del",id:a.attr("val")};b.process();$.post(AJAX_MAIN,c,function(a){a.success?($(".spisok").html(a.html),b.close(),_msg("Удалено!"),sortable()):b.abort()},"json")}})}).ready(function(){$("#setup_rules").length&&($(".g-save").click(function(){function a(a){c.vkHint({msg:'<SPAN class="red">'+a+"</SPAN>",top:-57,left:-6,indent:40,show:1,remove:1})}var b={op:"setup_worker_save",viewer_id:RULES_VIEWER_ID,first_name:$("#first_name").val(),last_name:$("#last_name").val(),
middle_name:$("#middle_name").val(),post:$("#post").val()},c=$(this);b.first_name?b.last_name?(c.addClass("busy"),$.post(AJAX_MAIN,b,function(a){c.removeClass("busy");a.success&&_msg("Сохранено.")},"json")):(a("Не указана фамилия"),$("#last_name").focus()):(a("Не указано имя"),$("#first_name").focus())}),$(".pin-clear").click(function(){var a={op:"setup_worker_pinclear",viewer_id:RULES_VIEWER_ID},b=$(this);b.hasClass("busy")||(b.addClass("busy"),$.post(AJAX_MAIN,a,function(a){b.removeClass("busy");
a.success&&_msg("Пин-код сброшен.")},"json"))}),$("#rules_cash")._check(function(a){$(".tr_selmoney")[(a?"remove":"add")+"Class"]("dn");$("#rules_selmoney")._check(0)}),$("#rules_appenter")._check(function(a){$(".app-div")[(0==a?"add":"remove")+"Class"]("dn");$("#rules_worker")._check(0);$("#rules_rules")._check(0);$("#rules_rekvisit")._check(0);$("#rules_product")._check(0);$("#rules_income")._check(0);$("#rules_zayavrashod")._check(0);$("#rules_historyshow")._check(0);$("#rules_money")._dropdown(0)}),
$("#rules_money")._dropdown({spisok:[{uid:0,title:"только свои"},{uid:1,title:"все платежи"}]}),$(".rules-save").click(function(){var a={op:"setup_worker_rules_save",viewer_id:RULES_VIEWER_ID,rules_appenter:$("#rules_appenter").val(),rules_worker:$("#rules_worker").val(),rules_rules:$("#rules_rules").val(),rules_rekvisit:$("#rules_rekvisit").val(),rules_product:$("#rules_product").val(),rules_income:$("#rules_income").val(),rules_zayavrashod:$("#rules_zayavrashod").val(),rules_historyshow:$("#rules_historyshow").val(),
rules_money:$("#rules_money").val()},b=$(this);b.hasClass("busy")||(b.addClass("busy"),$.post(AJAX_MAIN,a,function(a){b.removeClass("busy");a.success&&_msg("Права сохранены.")},"json"))}),$(".dop-save").click(function(){var a={op:"setup_worker_dop_save",viewer_id:RULES_VIEWER_ID,rules_cash:$("#rules_cash").val(),rules_selmoney:$("#rules_selmoney").val(),rules_getmoney:$("#rules_getmoney").val(),rules_nosalary:$("#rules_nosalary").val(),rules_zpzayavauto:$("#rules_zpzayavauto").val()},b=$(this);b.hasClass("busy")||
(b.addClass("busy"),$.post(AJAX_MAIN,a,function(a){b.removeClass("busy");a.success&&_msg("Дополнительные настройки сохранены.")},"json"))}));$("#setup_rekvisit").length&&$(".vkButton").click(function(){var a=$(this),b={op:"setup_rekvisit",org_name:$("#org_name").val(),ogrn:$("#ogrn").val(),inn:$("#inn").val(),kpp:$("#kpp").val(),yur_adres:$("#yur_adres").val(),telefon:$("#telefon").val(),ofice_adres:$("#ofice_adres").val()};a.addClass("busy");$.post(AJAX_MAIN,b,function(b){a.removeClass("busy");b.success&&
_msg("Информация сохранена.")},"json")})});
